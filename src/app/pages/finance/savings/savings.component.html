<div class="container mt-4">

  <div class="row">

    <!-- =========================
         LEFT FORM  (Savings Account)
    ============================= -->
    <div class="col-md-4">
      <div class="card shadow-sm">

        <div class="card-header bg-primary text-white py-1">
          <h5 class="mb-0" style="font-size: 14px;">
            {{ savingModel.id === 0 ? 'Add New Savings Account' : 'Update Savings Account' }}
          </h5>
        </div>

        <div class="card-body p-2">

          <!-- =========================
               Savings Account Form
          ========================= -->
          <form>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Account Name</label>
              <input type="text" class="form-control form-control-sm"
                     [(ngModel)]="savingModel.accountName" name="accountName">
            </div>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Organization</label>
              <input type="text" class="form-control form-control-sm"
                     [(ngModel)]="savingModel.organization" name="organization">
            </div>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Account No</label>
              <input type="text" class="form-control form-control-sm"
                     [(ngModel)]="savingModel.accountNo" name="accountNo">
            </div>

            <div class="form-group mb-2">
              <label style="font-size: 13px;">Branch</label>
              <input type="text" class="form-control form-control-sm"
                     [(ngModel)]="savingModel.branch" name="branch">
            </div>

            <div class="d-flex justify-content-between mt-2 mb-2">
              <button type="button"
                      class="btn btn-success btn-sm"
                      (click)="save()">
                {{ savingModel.id === 0 ? 'Save' : 'Update' }}
              </button>

              <button type="button"
                      class="btn btn-secondary btn-sm"
                      (click)="resetForm()">
                Reset
              </button>
            </div>

          </form>

        </div>
      </div>
    </div>


    <!-- =========================
         RIGHT LIST  (Savings Account List + Account Operation)
    ============================= -->
    <div class="col-md-8">

      <!-- Savings Account List -->
      <div class="card shadow-sm mb-2">

        <div class="card-header bg-dark text-white py-1">
          <h5 class="mb-0" style="font-size: 14px;">Savings Account List</h5>
        </div>

        <div class="card-body p-1">
          <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover mb-0 table-sm">
              <thead class="table-light text-center">
                <tr>
                  <th>SL</th>
                  <th>Account Name</th>
                  <th>Organization</th>
                  <th>Account No</th>
                  <th>Branch</th>
                  <th>Balance</th>
                  <th>Action</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let item of pagedList; let i = index"
                    [class.table-warning]="savingModel.id === item.id">

                  <td class="text-center">{{ (currentPage - 1) * pageSize + (i + 1) }}</td>
                  <td>{{ item.accountName }}</td>
                  <td>{{ item.organization }}</td>
                  <td>{{ item.accountNo }}</td>
                  <td>{{ item.branch }}</td>
                  <td class="text-end">{{ item.balance }}</td>

                  <td class="text-center">
                    <button class="btn btn-sm btn-primary"
                            (click)="edit(item)">
                      Edit
                    </button>
                  </td>
                </tr>

                <tr *ngIf="pagedList.length === 0">
                  <td colspan="7" class="text-center text-muted py-2">
                    No account found.
                  </td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>

        <!-- Pagination -->
        <div class="card-footer text-center bg-light py-1">
          <button class="btn btn-sm btn-outline-primary me-2"
                  [disabled]="currentPage === 1"
                  (click)="prevPage()">
            Previous
          </button>

          <span class="px-2" style="font-size: 13px;">Page {{ currentPage }} of {{ totalPages }}</span>

          <button class="btn btn-sm btn-outline-primary ms-2"
                  [disabled]="currentPage === totalPages"
                  (click)="nextPage()">
            Next
          </button>
        </div>

      </div>

      <!-- Account Operation Form -->
      <div class="card shadow-sm">

        <div class="card-header bg-info text-white py-1">
          <h6 class="mb-0" style="font-size: 14px;">Account Operation</h6>
        </div>

        <div class="card-body p-2">

          <form>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Select Account</label>
              <select class="form-select form-select-sm" [(ngModel)]="opModel.parentId" name="parentId">
                <option [ngValue]="null" disabled>Select an account</option>
                <option *ngFor="let acc of savingsList" [ngValue]="acc.id">
                  {{ acc.accountName }} - {{ acc.organization }} - {{ acc.accountNo }}
                </option>
              </select>
            </div>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Operation Type</label>
              <select class="form-select form-select-sm" [(ngModel)]="opModel.tType" name="tType">
                <option [value]="1">Deposit</option>
                <option [value]="0">Withdraw</option>
              </select>
            </div>

            <div class="form-group mb-1">
              <label style="font-size: 13px;">Amount</label>
              <input type="number" class="form-control form-control-sm"
                     [(ngModel)]="opModel.amount" name="amount">
            </div>

            <div class="form-group mb-2">
              <label style="font-size: 13px;">Date</label>
              <input type="date" class="form-control form-control-sm"
                     [(ngModel)]="opModel.dates" name="dates">
            </div>

            <div class="d-flex justify-content-between mt-1">
              <button type="button"
                      class="btn btn-primary btn-sm"
                      (click)="saveAccountOperation()"
                      [disabled]="!opModel.parentId || !opModel.amount">
                Submit Operation
              </button>
              <button type="button"
                      class="btn btn-secondary btn-sm"
                      (click)="opModel.amount=null">
                Reset Operation
              </button>
            </div>

          </form>

        </div>
      </div>

    </div>

  </div>

</div>
